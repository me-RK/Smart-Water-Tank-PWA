import{j as e,u as r,a as t,b as s}from"./index-1rMrzTej.js";import{r as a,u as n}from"./vendor-Dw3b2ko0.js";import{u as o,T as l,P as d}from"./PWAInstallButton-B3-IcgR5.js";import{j as i,A as c,k as x,l as g,C as m,a as u,m as b,Z as h,d as p,M as k,I as y,n as j,o as f,p as w}from"./icons-DUa41JBP.js";const v=({checked:r,onChange:t,disabled:s=!1,label:n,size:o="md",color:l="blue",showIcon:d=!1,className:i=""})=>{const[c,x]=a.useState(!1),g={blue:r?"bg-blue-500 shadow-blue-500/50":"bg-gray-300 dark:bg-gray-600",green:r?"bg-green-500 shadow-green-500/50":"bg-gray-300 dark:bg-gray-600",red:r?"bg-red-500 shadow-red-500/50":"bg-gray-300 dark:bg-gray-600",purple:r?"bg-purple-500 shadow-purple-500/50":"bg-gray-300 dark:bg-gray-600",indigo:r?"bg-indigo-500 shadow-indigo-500/50":"bg-gray-300 dark:bg-gray-600",pink:r?"bg-pink-500 shadow-pink-500/50":"bg-gray-300 dark:bg-gray-600"},m={sm:r?"translate-x-4":"translate-x-0",md:r?"translate-x-6":"translate-x-0",lg:r?"translate-x-8":"translate-x-0"},u=()=>{s||(x(!0),setTimeout(()=>x(!1),150),t(!r))};return e.jsxs("div",{className:`flex items-center space-x-3 ${i}`,children:[n&&e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:n}),e.jsxs("button",{type:"button",className:`\n          ${{sm:"w-8 h-4",md:"w-12 h-6",lg:"w-16 h-8"}[o]}\n          ${g[l]}\n          ${s?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-lg"}\n          ${c?"scale-95":"scale-100"}\n          relative inline-flex items-center rounded-full \n          transition-all duration-300 ease-out\n          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\n          ${r?"shadow-lg":"shadow-sm"}\n        `,onClick:u,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),u())},disabled:s,role:"switch","aria-checked":r,"aria-label":n||"Toggle switch",tabIndex:s?-1:0,children:[c&&!s&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 animate-ping"}),e.jsx("span",{className:`\n            ${{sm:"w-3 h-3",md:"w-5 h-5",lg:"w-7 h-7"}[o]}\n            ${m[o]}\n            bg-white dark:bg-gray-100 rounded-full shadow-lg \n            transform transition-all duration-300 ease-out\n            inline-block relative z-10\n            ${r?"shadow-lg":"shadow-md"}\n          `,children:d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r?e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})})]})]})},N=({checked:r,onChange:t,label:s,description:a,disabled:n=!1,color:o="blue"})=>{const l={blue:r?"bg-blue-500 border-blue-500":"border-gray-300 dark:border-gray-600",green:r?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600",purple:r?"bg-purple-500 border-purple-500":"border-gray-300 dark:border-gray-600",red:r?"bg-red-500 border-red-500":"border-gray-300 dark:border-gray-600"};return e.jsxs("div",{className:`\n      flex items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200\n      ${r?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}\n      ${n?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}\n    `,children:[e.jsx("button",{type:"button",className:`\n          ${l[o]}\n          w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-200\n          ${n?"cursor-not-allowed":"cursor-pointer"}\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n        `,onClick:()=>!n&&t(!r),disabled:n,role:"checkbox","aria-checked":r,children:r&&e.jsx(i,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 cursor-pointer",children:s}),a&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:a})]})]})},T=()=>{const i=n(),{appState:T,sendMessage:S,isConnected:A}=r();t(),o();const[M,B]=a.useState(T.systemSettings),[C,H]=a.useState(!1),[D,E]=a.useState(!1),[U,F]=a.useState("idle"),[L,I]=a.useState("overview"),[$,O]=a.useState({}),[W,G]=a.useState({});a.useEffect(()=>{B(T.systemSettings),H(!1)},[T.systemSettings]),a.useEffect(()=>{const e=s(M.topologySettings.systemTopology).uiBehavior;B(r=>({...r,sensors:{lowerTankA:!!e.showLowerTankA&&e.defaultLowerTankA,lowerTankB:!!e.showLowerTankB&&e.defaultLowerTankB,upperTankA:!!e.showUpperTankA&&e.defaultUpperTankA,upperTankB:!!e.showUpperTankB&&e.defaultUpperTankB},motorSettings:{...r.motorSettings,motor1Enabled:!!e.showMotor1&&e.defaultMotor1,motor2Enabled:!!e.showMotor2&&e.defaultMotor2}}))},[M.topologySettings.systemTopology]);const q=(e,r)=>{B(t=>({...t,sensors:{...t.sensors,[e]:r}})),H(!0)},P=(e,r,t)=>{B(s=>({...s,tankDimensions:{...s.tankDimensions,[e]:{...s.tankDimensions[e],[r]:t}}})),H(!0)},z=e=>{O(r=>({...r,[e]:!r[e]}))},K=e=>{G(r=>({...r,[e]:!r[e]}))},Q=(e,r,t)=>{B(s=>({...s,motorSettings:{...s.motorSettings,[e]:{...s.motorSettings[e],[r]:t}}})),H(!0)},R=s(M.topologySettings.systemTopology),Z=R.uiBehavior,J=M.sensors.lowerTankA||M.sensors.lowerTankB||M.sensors.upperTankA||M.sensors.upperTankB,V=[M.motorSettings.motor1Enabled,M.motorSettings.motor2Enabled].filter(Boolean).length,X=[{id:"overview",label:"Overview",icon:k},{id:"hardware",label:"Hardware",icon:p},{id:"automation",label:"Automation",icon:h},{id:"advanced",label:"Advanced",icon:j}];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>i("/dashboard"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(c,{className:"w-5 h-5 transition-all duration-300 hover:scale-110 hover:rotate-12"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Smart Settings"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(l,{}),e.jsx(d,{}),e.jsx("button",{onClick:()=>{B(T.systemSettings),H(!1)},disabled:!C,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset Changes",children:e.jsx(x,{className:"w-5 h-5 transition-all duration-300 hover:scale-110 hover:rotate-12"})}),e.jsx("button",{onClick:async()=>{if(A){E(!0),F("idle");try{await S({type:"updateSettings",settings:M}),H(!1),F("success"),setTimeout(()=>{i("/dashboard")},2e3)}catch(e){F("error"),setTimeout(()=>F("idle"),3e3)}finally{E(!1)}}},disabled:!C||!A||D,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors disabled:cursor-not-allowed",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 transition-all duration-300 hover:scale-110 hover:rotate-12"}),e.jsx("span",{children:"Save Settings"})]})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[!A&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Not connected to server. Settings cannot be saved."})]})}),"success"===U&&e.jsx("div",{className:"mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Settings saved successfully!"})]})}),"error"===U&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Failed to save settings. Please check your connection."})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl shadow-lg border border-blue-200 dark:border-blue-800 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 flex items-center space-x-3",children:[e.jsx(b,{className:"w-6 h-6"}),e.jsx("span",{children:"Smart Configuration"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"px-4 py-2 rounded-full text-sm font-medium "+("Auto Mode"===M.mode?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"),children:M.mode}),e.jsxs("div",{className:"px-4 py-2 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:["Topology ",M.topologySettings.systemTopology]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 flex items-center space-x-2",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:"System Mode"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{checked:"Auto Mode"===M.mode,onChange:e=>{return r=e?"Auto Mode":"Manual Mode",B(e=>({...e,mode:r})),void H(!0);var r},label:"Auto Mode"===M.mode?"Auto Mode":"Manual Mode",color:"Auto Mode"===M.mode?"blue":"purple"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Auto Mode"===M.mode?"System automatically controls motors based on water levels":"Manual control of motors and system operations"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 flex items-center space-x-2",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:"Hardware"})]}),e.jsxs("select",{value:M.topologySettings.systemTopology,onChange:e=>{const r=parseInt(e.target.value),t={1:"Dual UG | Dual OH | Dual Motor",2:"Single UG | Single OH | Single Motor",3:"Borewell | Single OH | Single Motor",4:"Borewell | UG | OH | Single Motor",5:"Single UG | Dual OH | Dual Motor"};B(e=>({...e,motorSettings:{...e.motorSettings,configuration:r},topologySettings:{...e.topologySettings,systemTopology:r,topologyLabel:t[r]||"Unknown"}}))},className:"w-full px-3 py-2 text-sm border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"1",children:"Dual UG | Dual OH | Dual Motor"}),e.jsx("option",{value:"2",children:"Single UG | Single OH | Single Motor"}),e.jsx("option",{value:"3",children:"Borewell | Single OH | Single Motor"}),e.jsx("option",{value:"4",children:"Borewell | UG | OH | Single Motor"}),e.jsx("option",{value:"5",children:"Single UG | Dual OH | Dual Motor"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 flex items-center space-x-2",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Sensors:"}),e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:[M.sensors.lowerTankA,M.sensors.lowerTankB,M.sensors.upperTankA,M.sensors.upperTankB].filter(Boolean).length})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Motors:"}),e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:V})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Auto Mode:"}),e.jsx("span",{className:"font-medium "+(M.topologySettings.autoMode?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:M.topologySettings.autoMode?"Enabled":"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Quick Info"})]}),e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[e.jsxs("p",{children:["• ",R.description]}),e.jsxs("p",{children:["• ",V," motor",1!==V?"s":""," active"]}),e.jsxs("p",{children:["• ",J?"Sensors configured":"No sensors active"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:X.map(r=>{const t=r.icon;return e.jsxs("button",{onClick:()=>I(r.id),className:"flex items-center space-x-2 px-6 py-4 text-sm font-medium transition-colors "+(L===r.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:r.label})]},r.id)})}),e.jsxs("div",{className:"p-6",children:["overview"===L&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Configuration Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Hardware Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:R.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Tanks:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[R.hasLowerTankA&&e.jsx("li",{children:"• Lower Tank A"}),R.hasLowerTankB&&e.jsx("li",{children:"• Lower Tank B"}),R.hasUpperTankA&&e.jsx("li",{children:"• Upper Tank A"}),R.hasUpperTankB&&e.jsx("li",{children:"• Upper Tank B"}),R.hasBorewell&&e.jsx("li",{children:"• Borewell"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Motors:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[R.hasMotor1&&e.jsx("li",{children:"• Motor 1"}),R.hasMotor2&&e.jsx("li",{children:"• Motor 2"})]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-3",children:"Current Status"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"System Mode:"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:M.mode})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Active Sensors:"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:[M.sensors.lowerTankA,M.sensors.lowerTankB,M.sensors.upperTankA,M.sensors.upperTankB].filter(Boolean).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Active Motors:"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:V})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Auto Mode:"}),e.jsx("span",{className:"font-medium "+(M.topologySettings.autoMode?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:M.topologySettings.autoMode?"Enabled":"Disabled"})]})]})]})]})]}),"hardware"===L&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Hardware Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"Sensor Activation"}),e.jsxs("div",{className:"space-y-4",children:[Z.showLowerTankA&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{checked:M.sensors.lowerTankA,onChange:e=>q("lowerTankA",e),label:"Lower Tank A",description:Z.enableLowerTankA?"Monitor water level in lower tank A":"Lower Tank A sensor is required for this topology",color:"blue",disabled:!Z.enableLowerTankA}),M.sensors.lowerTankA&&e.jsxs("button",{onClick:()=>z("lowerTankA"),className:"flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[e.jsx("span",{children:"Dimensions"}),$.lowerTankA?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.sensors.lowerTankA&&$.lowerTankA&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Lower Tank A Dimensions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankA.height,onChange:e=>P("lowerTankA","height",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Water Full Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankA.waterFullHeight,onChange:e=>P("lowerTankA","waterFullHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Water Empty Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankA.waterEmptyHeight,onChange:e=>P("lowerTankA","waterEmptyHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),Z.showLowerTankB&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{checked:M.sensors.lowerTankB,onChange:e=>q("lowerTankB",e),label:"Lower Tank B",description:Z.enableLowerTankB?"Monitor water level in lower tank B":"Lower Tank B sensor is required for this topology",color:"blue",disabled:!Z.enableLowerTankB}),M.sensors.lowerTankB&&e.jsxs("button",{onClick:()=>z("lowerTankB"),className:"flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[e.jsx("span",{children:"Dimensions"}),$.lowerTankB?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.sensors.lowerTankB&&$.lowerTankB&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Lower Tank B Dimensions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankB.height,onChange:e=>P("lowerTankB","height",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Water Full Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankB.waterFullHeight,onChange:e=>P("lowerTankB","waterFullHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Water Empty Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.lowerTankB.waterEmptyHeight,onChange:e=>P("lowerTankB","waterEmptyHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),Z.showUpperTankA&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{checked:M.sensors.upperTankA,onChange:e=>q("upperTankA",e),label:"Upper Tank A",description:Z.enableUpperTankA?"Monitor water level in upper tank A":"Upper Tank A sensor is required for this topology",color:"green",disabled:!Z.enableUpperTankA}),M.sensors.upperTankA&&e.jsxs("button",{onClick:()=>z("upperTankA"),className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300",children:[e.jsx("span",{children:"Dimensions"}),$.upperTankA?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.sensors.upperTankA&&$.upperTankA&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-3",children:"Upper Tank A Dimensions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankA.height,onChange:e=>P("upperTankA","height",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Water Full Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankA.waterFullHeight,onChange:e=>P("upperTankA","waterFullHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Water Empty Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankA.waterEmptyHeight,onChange:e=>P("upperTankA","waterEmptyHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),Z.showUpperTankB&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{checked:M.sensors.upperTankB,onChange:e=>q("upperTankB",e),label:"Upper Tank B",description:Z.enableUpperTankB?"Monitor water level in upper tank B":"Upper Tank B sensor is required for this topology",color:"green",disabled:!Z.enableUpperTankB}),M.sensors.upperTankB&&e.jsxs("button",{onClick:()=>z("upperTankB"),className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300",children:[e.jsx("span",{children:"Dimensions"}),$.upperTankB?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.sensors.upperTankB&&$.upperTankB&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-3",children:"Upper Tank B Dimensions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankB.height,onChange:e=>P("upperTankB","height",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Water Full Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankB.waterFullHeight,onChange:e=>P("upperTankB","waterFullHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Water Empty Height (cm)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:M.tankDimensions.upperTankB.waterEmptyHeight,onChange:e=>P("upperTankB","waterEmptyHeight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"Motor Configuration"}),e.jsxs("div",{className:"space-y-4",children:[Z.showMotor1&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{checked:M.motorSettings.motor1Enabled,onChange:e=>{B(r=>({...r,motorSettings:{...r.motorSettings,motor1Enabled:e}}))},label:"Motor 1",color:"blue",disabled:!Z.enableMotor1}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z.enableMotor1?"Enable/disable Motor 1 operation":"Motor 1 is required for this topology"})]}),M.motorSettings.motor1Enabled&&e.jsxs("button",{onClick:()=>K("motor1Timer"),className:"flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[e.jsx("span",{children:"Safety Timer"}),W.motor1Timer?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.motorSettings.motor1Enabled&&W.motor1Timer&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Motor 1 Safety Timer"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Enable Auto Turn-off Timer"}),e.jsx(v,{checked:M.motorSettings.motor1Timer.enabled,onChange:e=>Q("motor1Timer","enabled",e),label:"",color:"blue"})]}),M.motorSettings.motor1Timer.enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Timer Duration (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"480",value:M.motorSettings.motor1Timer.duration,onChange:e=>Q("motor1Timer","duration",parseInt(e.target.value)||30),className:"w-full px-2 py-1 text-xs border border-blue-300 dark:border-blue-600 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Motor will automatically turn off after ",M.motorSettings.motor1Timer.duration," minutes for safety"]})]})]})]})]}),Z.showMotor2&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{checked:M.motorSettings.motor2Enabled,onChange:e=>{B(r=>({...r,motorSettings:{...r.motorSettings,motor2Enabled:e}}))},label:"Motor 2",color:"green",disabled:!Z.enableMotor2}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z.enableMotor2?"Enable/disable Motor 2 operation":"Motor 2 is required for this topology"})]}),M.motorSettings.motor2Enabled&&e.jsxs("button",{onClick:()=>K("motor2Timer"),className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300",children:[e.jsx("span",{children:"Safety Timer"}),W.motor2Timer?e.jsx(f,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"})]})]}),M.motorSettings.motor2Enabled&&W.motor2Timer&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-3",children:"Motor 2 Safety Timer"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Enable Auto Turn-off Timer"}),e.jsx(v,{checked:M.motorSettings.motor2Timer.enabled,onChange:e=>Q("motor2Timer","enabled",e),label:"",color:"green"})]}),M.motorSettings.motor2Timer.enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Timer Duration (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"480",value:M.motorSettings.motor2Timer.duration,onChange:e=>Q("motor2Timer","duration",parseInt(e.target.value)||30),className:"w-full px-2 py-1 text-xs border border-green-300 dark:border-green-600 rounded focus:ring-1 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Motor will automatically turn off after ",M.motorSettings.motor2Timer.duration," minutes for safety"]})]})]})]})]})]})]})]}),"automation"===L&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Automation Settings"}),"Auto Mode"===M.mode?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Auto Mode Active"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"The system is configured for automatic operation. Motors will be controlled based on water levels and configured thresholds."})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"• Tank-specific automation settings will be available based on your sensor configuration"}),e.jsx("p",{children:"• Water level thresholds can be configured for each active sensor"}),e.jsx("p",{children:"• Motor coordination settings are managed automatically based on topology"})]})]}):e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-800 dark:text-purple-200 mb-2",children:"Manual Mode Active"}),e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"The system is in manual mode. All motor operations must be controlled manually from the dashboard."})]})]}),"advanced"===L&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Advanced Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"Motor Control"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{checked:M.topologySettings.preventSimultaneous,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,preventSimultaneous:e}}))},label:"Prevent Simultaneous Motors",color:"red"}),4===M.topologySettings.systemTopology&&e.jsx(v,{checked:M.topologySettings.syncBoreTransfer,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,syncBoreTransfer:e}}))},label:"Sync Bore-Transfer Motors",color:"green"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"System Settings"}),e.jsx("div",{className:"space-y-3",children:e.jsx(v,{checked:M.topologySettings.logEnabled,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,logEnabled:e}}))},label:"Enable Logging",color:"purple"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"Advanced Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Level Increase Min (mm)"}),e.jsx("input",{type:"number",min:"10",max:"100",value:M.topologySettings.levelIncreaseMin,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,levelIncreaseMin:parseInt(e.target.value)||20}}))},className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Motor Timeout (s)"}),e.jsx("input",{type:"number",min:"60",max:"600",value:M.topologySettings.motorTimeout,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,motorTimeout:parseInt(e.target.value)||300}}))},className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Fault Cooldown (s)"}),e.jsx("input",{type:"number",min:"60",max:"1800",value:M.topologySettings.faultCooldown,onChange:e=>{B(r=>({...r,topologySettings:{...r.topologySettings,faultCooldown:parseInt(e.target.value)||600}}))},className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]})]})]})]})]})};export{T as Settings};
